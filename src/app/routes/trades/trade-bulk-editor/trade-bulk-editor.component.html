<mat-card>
  <mat-card-content>
    <mat-vertical-stepper [linear]="false" #stepper (selectionChange)="selectionChange($event)">
      <mat-step *ngFor="let trade of bulkEditTrades;let i=index" #step  [completed]="this.currentForm?.fg?.valid!"  [hasError]="isHasError(i)" errorMessage="Trade contains errors">
        <form >
          <ng-template matStepLabel>{{trade.symbol}} {{trade.entryDate}} </ng-template>
          <app-trades-trade-edit-form *ngIf="trade" [id]="trade.id" #tform></app-trades-trade-edit-form>
          <div>
            <button mat-button matStepperNext *ngIf="!isLastStep(i)" [disabled]="isHasError(i)">Save & Next</button>
            <button mat-button *ngIf="isLastStep(i)" [disabled]="isHasError(i)" (click)="saveAndFinish(i)">Save & Finish</button>
          </div>
        </form>
      </mat-step>
    </mat-vertical-stepper>
  </mat-card-content>
</mat-card>
